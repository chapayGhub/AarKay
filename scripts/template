rm -rf "aarkay-plugin-{{ cookiecutter.name|lower }}"
cp -R ".github/aarkay-plugin-PLUGINLOWERNAME" ".github/aarkay-plugin-PLUGINLOWERNAME.bak"

# Do replacements
function replace {
  LC_ALL=C find ./.github/aarkay-plugin-PLUGINLOWERNAME -type f -exec sed -i '' "s/$1/$2/g" {} +
}
replace "PLUGINLOWERNAME" "{{ cookiecutter.name|lower}}"
replace "PLUGINNAME" "{{ cookiecutter.name }}"
replace "PLUGINSUMMARY" "{{ cookiecutter.summary }}"
replace "PLUGINGITHUB" "{{ cookiecutter.github }}"

# Do Renames
function rename {
  LC_ALL=C find ./.github/aarkay-plugin-PLUGINLOWERNAME -type f -exec rename -p -S "$1" "$2" {} +
}
rename "AarKayPLUGINNAME" "AarKay{{ cookiecutter.name }}"
rename "AarKayPLUGINNAMECLI" "AarKay{{ cookiecutter.name }}CLI"
rename "PLUGINNAME.Template.yml" "{{ cookiecutter.name }}.Template.yml"
rename "PLUGINNAME.txt.stencil" "{{ cookiecutter.name }}.txt.stencil"
rename "PLUGINNAME.yml" "{{ cookiecutter.name }}.yml"
rename "PLUGINNAME.swift" "{{ cookiecutter.name }}.swift"
rename "PLUGINLOWERNAME" "{{ cookiecutter.name|lower }}"
rename "aarkay-plugin-PLUGINLOWERNAME" "aarkay-plugin-{{ cookiecutter.name|lower }}"

rm -rf .github/aarkay-plugin-PLUGINLOWERNAME
mv .github/aarkay-plugin-PLUGINLOWERNAME.bak .github/aarkay-plugin-PLUGINLOWERNAME

mv ".github/aarkay-plugin-{{ cookiecutter.name|lower }}" "aarkay-plugin-{{ cookiecutter.name|lower }}"
rm -rf "aarkay-plugin-{{ cookiecutter.name|lower }}/.build"
rm -rf "aarkay-plugin-{{ cookiecutter.name|lower }}"/*.xcodeproj
rm "aarkay-plugin-{{ cookiecutter.name|lower }}/Package.resolved"
mv "aarkay-plugin-{{ cookiecutter.name|lower }}/.gitignore" "aarkay-plugin-{{ cookiecutter.name|lower }}/_gitignore"
